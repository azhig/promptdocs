::::::::::: chat-message-markdown
# Стандартная структура эффективных промптов: Роль + Контекст + Инструкция

Современные исследования в области промпт-инжиниринга показывают, что
наиболее эффективная структура промптов включает три ключевых элемента:
роль, контекст и инструкцию. Этот подход стал стандартом, поскольку
значительно повышает качество взаимодействия с языковыми моделями и
точность получаемых ответов.

## Научное обоснование структуры

Структура \"Роль + Контекст + Инструкция\" основана на нескольких важных
исследованиях, которые продемонстрировали ее эффективность через анализ
взаимодействия человека с языковыми моделями:

### Почему это работает:

1.  **Направленная активация знаний** --- указание роли активирует
    определенные паттерны ответов и наборы знаний в модели
2.  **Улучшение контекстуального понимания** --- предоставление
    контекста помогает модели точнее интерпретировать запрос
3.  **Создание когнитивной рамки** --- структурированный промпт создает
    \"программный\" режим выполнения для модели
4.  **Иерархия информации** --- разделение на компоненты помогает модели
    лучше понять приоритеты и взаимосвязи

Согласно исследованиям, такое структурирование может повысить
эффективность запросов на 17.5% и более, поскольку модель лучше
удерживает контекст и следует инструкциям в рамках единого, хорошо
организованного промпта.

## Компоненты эффективного промпта

### 1. РОЛЬ

**Определение**: Указание конкретной роли (профессии, характера,
персонажа), которую должна принять модель при ответе.

**Почему это важно**:

- Активирует соответствующие домены знаний
- Устанавливает тональность и стиль ответа
- Задает рамки компетенции и авторитета

**Примеры эффективных ролей**:

- \"Ты опытный инженер-оптимизатор, специализирующийся на эффективных
  алгоритмах\"
- \"Ты медицинский ассистент, обученный на обширной медицинской
  литературе\"
- \"Действуй как финансовый аналитик с 15-летним опытом работы на
  фондовом рынке\"

### 2. КОНТЕКСТ

**Определение**: Информация о ситуации, предметной области, ограничениях
или предыстории, которая помогает модели лучше понять запрос и
сформировать релевантный ответ.

**Почему это важно**:

- Обеспечивает необходимые фоновые знания
- Устанавливает границы и ограничения
- Помогает фокусироваться на релевантной информации

**Типы контекста, повышающие эффективность**:

- **Домен-специфический контекст**: \"Это часть системы биллинга для
  телекоммуникационной компании\"
- **Ситуационный контекст**: \"Этот анализ будет представлен руководству
  компании\"
- **Технический контекст**: \"Работаем с Java-библиотекой для обработки
  данных\"
- **Временной контекст**: \"Данные относятся к периоду за последние 3
  месяца\"

### 3. ИНСТРУКЦИЯ

**Определение**: Четкое указание, что именно требуется сделать, в каком
формате и с какими особенностями должен быть предоставлен ответ.

**Почему это важно**:

- Определяет конкретную задачу
- Задает форму и структуру результата
- Устанавливает метрики успешного выполнения

**Компоненты эффективной инструкции**:

- **Действие**: \"Проанализируй\", \"Создай\", \"Объясни\", \"Сравни\"
- **Объект**: Что именно нужно обработать
- **Формат**: Как должен выглядеть ответ
- **Критерии**: Какие стандарты должны быть соблюдены

## Практические примеры и шаблоны

### Пример 1: Медицинская консультация

::: example-block
Копировать

    # Медицинская консультация по симптомам

    ## Роль
    Ты — медицинский ассистент, обученный на обширной медицинской литературе. 
    Твоя задача — предоставить информативный, точный и хорошо структурированный
    ответ на медицинский запрос пациента.

    ## Контекст
    Пациенты часто ищут предварительную информацию о своих симптомах перед обращением к врачу.
    Важно предоставить достоверную информацию без постановки окончательного диагноза и с
    обязательным указанием на необходимость консультации с врачом.

    ## Инструкция
    Проанализируй описанные пациентом симптомы и предоставь следующую информацию:
    1. Возможные причины указанных симптомов (от наиболее до наименее вероятных)
    2. Рекомендуемые дальнейшие действия, разделенные по срочности
    3. Признаки, при которых необходимо немедленное обращение за медицинской помощью
    4. Общие рекомендации по облегчению симптомов

    Формат ответа должен быть структурирован по разделам, простым языком, без чрезмерного
    использования медицинской терминологии. В конце обязательно укажи, что информация носит
    общий характер и не заменяет консультацию врача.
:::

### Пример 2: Анализ кода

::: example-block
Копировать

    # Анализ и улучшение кода

    ## Роль
    Ты опытный разработчик программного обеспечения с глубоким пониманием принципов чистого кода, 
    оптимизации производительности и архитектурных паттернов.

    ## Контекст
    Это часть системы биллинга для телекоммуникационной компании, которая обрабатывает платежи 
    клиентов и управляет тарифными планами. Код выполняется в высоконагруженной среде, где критично
    время отклика и эффективность работы с памятью.

    ## Инструкция
    Проанализируй предоставленный фрагмент кода и выполни следующие действия:
    1. Опиши основную функциональность кода и его предназначение
    2. Выяви потенциальные проблемы: ошибки, неэффективные участки, проблемы с читаемостью
    3. Предложи конкретные улучшения с объяснением, почему они эффективны
    4. Представь улучшенную версию кода с комментариями

    Твой ответ должен содержать:
    - Краткое резюме (не более 3 предложений)
    - Детальный анализ с указанием строк кода
    - Улучшенную версию с выделенными изменениями
    - Оценку улучшения производительности/читаемости
:::

### Пример 3: Финансовый анализ

::: example-block
Копировать

    # Финансовый анализ компании

    ## Роль
    Ты финансовый аналитик с опытом работы в инвестиционном банкинге, специализирующийся 
    на оценке стоимости компаний и анализе финансовой отчетности.

    ## Контекст бизнес-домена
    Анализируемая компания работает в секторе технологий, фокусируясь на SaaS-решениях для 
    корпоративного сегмента. Компания находится на стадии быстрого роста, но еще не достигла 
    устойчивой прибыльности. Текущая рыночная ситуация характеризуется повышением процентных 
    ставок и осторожным отношением инвесторов к непрофильным технологическим компаниям.

    ## Инструкция
    На основе предоставленных финансовых данных проведи комплексный анализ компании:

    1. Оцени ключевые финансовые показатели:
       - Рост выручки и его устойчивость
       - Валовая и операционная маржа
       - Показатели ликвидности и платежеспособности
       - Показатели эффективности использования капитала

    2. Сравни с отраслевыми бенчмарками:
       - Укажи, где компания опережает или отстает от среднеотраслевых показателей
       - Определи потенциальные конкурентные преимущества

    3. Предоставь итоговую оценку:
       - Основные сильные и слабые стороны финансового положения
       - Рекомендации по улучшению финансовых показателей
       - Оценка инвестиционной привлекательности (по шкале от 1 до 10)

    Ответ должен быть профессионально структурирован, с использованием соответствующей финансовой 
    терминологии, но понятен для руководства компании без глубокого финансового образования.
:::

## Дополнительные элементы, повышающие эффективность

В дополнение к основной структуре, существуют элементы, которые могут
значительно улучшить качество ответов:

### 1. Примеры (Few-shot learning)

Исследования показывают, что включение примеров в промпт существенно
улучшает понимание задачи моделью. Для оптимальной работы:

- Достаточно 10-60 примеров для хорошей работы
- Релевантные примеры лучше размещать ближе к целевому контексту
- Примеры должны быть семантически близки к задаче

### 2. Критерии оценки

Четкое определение критериев хорошего ответа помогает модели лучше
понять ожидания:

::: example-block
Копировать

    ## Критерии качественного ответа
    - Полнота: все аспекты вопроса должны быть раскрыты
    - Точность: информация должна быть фактически корректной
    - Структурированность: информация должна быть логически организована
    - Понятность: сложные концепции должны объясняться доступным языком
:::

### 3. Метаинструкции

Указания о том, как следует обрабатывать запрос, могут сильно влиять на
качество ответа:

::: example-block
Копировать

    ## Метаинструкции
    - Сначала проанализируй задачу полностью, прежде чем приступать к ответу
    - Если какая-то информация неясна, укажи предположения, которые ты делаешь
    - Отделяй факты от мнений и четко обозначай, где представлена твоя интерпретация
    - Используй пошаговый подход при объяснении сложных концепций
:::

## Комбинирование со смежными методами

Структура \"Роль + Контекст + Инструкция\" хорошо сочетается с другими
методами промпт-инжиниринга:

### 1. Chain of Thought (CoT) - Цепочка размышлений

Комбинация стандартной структуры с CoT особенно эффективна для сложных
задач:

::: example-block
Копировать

    ## Инструкция
    ...
    Важно: при решении используй метод "мышления шаг за шагом" — записывай каждый этап
    твоих рассуждений, прежде чем переходить к следующему. Показывай промежуточные выводы
    и логику принятия решений на каждом этапе.
:::

### 2. Многоэтапное рассуждение

Структурирование инструкций в виде последовательных шагов:

::: example-block
Копировать

    ## Инструкция
    Выполни анализ в следующей последовательности:
    1. ЭТАП ПОДГОТОВКИ:
       - Изучи предоставленные данные
       - Определи ключевые метрики для анализа
       
    2. ЭТАП АНАЛИЗА:
       - Проведи расчет выбранных метрик
       - Сравни полученные значения с бенчмарками
       
    3. ЭТАП ВЫВОДОВ:
       - Сформулируй основные выводы
       - Предложи рекомендации на основе анализа
:::

### 3. Self-consistency - Самосогласованность

Требование проверки результатов и обеспечения внутренней
согласованности:

::: example-block
Копировать

    ## Инструкция
    ...
    После формулирования ответа, проверь его на внутреннюю согласованность:
    - Не противоречат ли части ответа друг другу?
    - Соответствуют ли рекомендации проведенному анализу?
    - Учтены ли все ограничения из контекста?
    Если обнаружены несоответствия, исправь их и объясни изменения.
:::

## Принципы и рекомендации по созданию эффективных промптов

На основе исследований можно сформулировать следующие принципы:

### 1. Специфичность над общностью

- Используйте конкретные, а не общие формулировки
- Указывайте точные критерии вместо расплывчатых пожеланий
- Задавайте четкие форматы ответов

### 2. Иерархический подход

- Разбивайте сложные задачи на более мелкие компоненты
- Используйте многоуровневые заголовки для структурирования
- Применяйте вложенные списки для передачи иерархии понятий

### 3. Декларативные vs. императивные инструкции

- Императивные инструкции (\"опиши\", \"проанализируй\") более
  эффективны для прямых задач
- Декларативные инструкции лучше для задания общих принципов и
  ограничений

### 4. Повторение ключевых требований

- Размещайте важные требования в начале и в конце промпта
- Используйте маркеры важности (выделение, заглавные буквы)
- Повторяйте критические ограничения в разных формулировках

## Проверка эффективности промпта

Исследования показывают, что эффективные промпты должны оцениваться по
нескольким критериям:

1.  **Точность выполнения задачи** --- насколько результат соответствует
    поставленной цели
2.  **Следование инструкциям** --- учтены ли все требования и
    ограничения
3.  **Структурность ответа** --- насколько организована информация в
    ответе
4.  **Адаптивность** --- насколько промпт работает в различных сценариях

## Итеративное улучшение

Оптимальная стратегия создания эффективных промптов включает:

1.  Начало с базовой структуры \"Роль + Контекст + Инструкция\"
2.  Оценка ответа по нескольким критериям
3.  Модификация промпта на основе анализа результатов
4.  Повторение процесса для достижения оптимального результата

## Заключение

Структура \"Роль + Контекст + Инструкция\" стала стандартом в
промпт-инжиниринге благодаря своей эффективности, подтвержденной
многочисленными исследованиями. Она представляет собой базовую основу,
которую можно расширить и адаптировать под конкретные задачи, комбинируя
с другими методами.

Ключевые преимущества этой структуры:

- Значительное повышение эффективности взаимодействия с ИИ (до 17.5% и
  выше)
- Лучшее удержание контекста и следование инструкциям
- Более структурированные и полезные ответы
- Универсальность применения в различных областях и задачах

Системное применение этого подхода с учетом описанных принципов и
рекомендаций позволяет максимально эффективно использовать возможности
современных языковых моделей.
:::::::::::
